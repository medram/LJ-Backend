"use strict";(self.webpackChunkAskPDF_frontend=self.webpackChunkAskPDF_frontend||[]).push([[456],{9456:(e,s,n)=>{n.r(s),n.d(s,{default:()=>H});var i=n(6584),o=n(9500),t=n(3520),a=n(1772),l=n(9060),r=n(7768),c=n(1736),d=n(2816),u=n(2204),m=n(1032),j=n(2496);function h(e){let{title:s,onClick:n,onDelete:t,active:a=!1}=e;const[r,c]=(0,l.useState)(!1);return(0,j.jsxs)("div",{role:"button",className:["chat-label",a&&"active"].join(" "),onClick:n,children:[(0,j.jsx)(d.c,{icon:u.c,stroke:1.25})," ",s,(0,j.jsx)("span",{className:"delete",onClick:()=>{c(!0),"function"===typeof t&&t((()=>{c(!1)}))},children:r?(0,j.jsx)(o.u,{icon:i.iE_,spin:!0}):(0,j.jsx)(d.c,{icon:m.c,stroke:1.25})})]})}var x=n(1444);const g="data:image/png;base64,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";var p=n(9512);function v(e){let{content:s}=e;return(0,j.jsxs)("div",{className:"message ai-message",children:[(0,j.jsx)("img",{src:g,className:"avatar"}),(0,j.jsx)(p.I,{children:s})]})}function b(e){let{content:s}=e;return(0,j.jsx)("div",{className:"message user-message",children:s})}var A=n(9556),C=n(980),f=n(1228),D=n(8807),S=n(8e3),w=n(9804);function y(e){let{content:s}=e;return(0,j.jsxs)("div",{className:"message ai-message",children:[(0,j.jsx)(w.c,{size:"sm"})," ",s||" Thinking..."]})}var N=n(4022),E=n(4520),O=n(7676),M=n(4308);function k(e){let{uuid:s}=e;const{isDemo:n}=(0,r.AX)(),[i,o]=(0,r.oV)("demo_sub"),t=i(),a=(0,D.useQueryClient)(),{isLoading:c,isError:u,error:h,chat:g}=(0,C.cp)(s),[p,w]=(0,l.useState)([]),[k,Q]=(0,l.useState)(""),[z,B]=(0,l.useState)(!1),[J,I]=(0,l.useState)(!1),[U,R]=(0,r.oJ)();(0,l.useEffect)((()=>{if(null!==g&&void 0!==g&&g.chat_history)try{let e=[];JSON.parse(null===g||void 0===g?void 0:g.chat_history).map(((s,n)=>{"ai"===s.type?e[n]=(0,j.jsx)(v,{content:s.content},n):e[n]=(0,j.jsx)(b,{content:s.content},n)})),w(e)}catch(h){console.log("error parsing chat history")}else w([]);R()}),[c,g]),(0,l.useEffect)((()=>{R()}),[]);const G=(0,l.useCallback)((e=>(e.preventDefault(),k.trim()?n&&(null===t||void 0===t?void 0:t.questions)<=0?f.m4.warning("The demo quota is exceeded, please wait 12 hours \ud83d\ude4f"):(B(!0),w((e=>[...e,(0,j.jsx)(b,{content:k},Math.random()),(0,j.jsx)(y,{},Math.random())])),Q(""),R(),void(0,S.uQ)(s,k).then((e=>{if(null!==e&&void 0!==e&&e.errors)f.m4.error(e.message),w((e=>e.slice(0,-1)));else{var s,i;const t=null===e||void 0===e||null===(s=e.response)||void 0===s||null===(i=s.output)||void 0===i?void 0:i.trim();t||f.m4.error("OpenAI servers are overloaded, please try again or later"),w((e=>[...e.slice(0,-1),(0,j.jsx)(v,{content:t},Math.random())])),a.invalidateQueries("user.subscription"),n&&o((e=>({...e,questions:e.questions-1})))}})).catch((e=>{var s,n,i,o;null!==(s=e.response)&&void 0!==s&&null!==(n=s.data)&&void 0!==n&&n.message?f.m4.warning(null===(i=e.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message):f.m4.error(e.message);w((e=>e.slice(0,-1)))})).finally((()=>{B(!1),a.invalidateQueries("user.chat.".concat(s)),R()}))):f.m4.warning("Please ask something."))),[s,k]),W=(0,l.useCallback)((e=>{(0,S.uo)(s).then((e=>{console.log("prompt stopped")})).catch((e=>{var s,n;422===e.response.status||400===e.response.status?f.m4.warning(null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message):f.m4.error(e.message)})).finally((()=>{})),B(!1),w((e=>e.slice(0,-1)))}),[s]),Y=(0,l.useCallback)((()=>{I(!0),(0,S.k9)(s).then((e=>{204===e.status?(f.m4.success("Cleared successfully."),a.invalidateQueries("user.chat.".concat(s)),w([])):f.m4.warning("Something went wrong!")})).catch((e=>{f.m4.error(e)})).finally((()=>{I(!1)}))}),[s]);return c?(0,j.jsx)(A.c,{center:!0}):(u&&f.m4.error(h),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"chats flex-grow-1 d-flex align-items-end",children:(0,j.jsx)("div",{className:"container px-4",children:p.map(((e,s)=>e))})}),(0,j.jsxs)("div",{className:"container prompt-input d-flex gap-2 pt-5 pb-4 px-4",ref:U,children:[(0,j.jsx)("form",{onSubmit:G,className:"flex-grow-1",children:(0,j.jsx)("input",{type:"text",value:k,onChange:e=>Q(e.target.value),className:"form-control form-control-lg",placeholder:"Ask your document a question?"})}),(0,j.jsx)(N.c,{placement:"top",delay:{show:250,hide:400},overlay:e=>(0,j.jsx)(E.c,{id:"button-tooltip",...e,children:z?"Stop":"Send"}),children:(0,j.jsx)(x.c,{disabled:!k&&!z,className:["btn btn-sm send",z?"btn-danger":"btn-primary"].join(" "),title:z?"Stop":"Send",onClick:e=>{if(z)return W(e);G(e)},children:z?(0,j.jsx)(d.c,{icon:O.c}):(0,j.jsx)(d.c,{icon:M.c})})}),(0,j.jsx)(N.c,{placement:"top",delay:{show:250,hide:400},overlay:e=>(0,j.jsx)(E.c,{id:"button-tooltip",...e,children:"Clear Chat History"}),children:(0,j.jsx)(x.c,{className:"btn btn-outline-secondary clear-history",isLoading:J,title:"Clear Chat History",onClick:Y,children:(0,j.jsx)(d.c,{icon:m.c})})})]})]}))}var Q=n(1560),z=n(12),B=n(7944),J=n(6612),I=n(312),U=n(3144),R=n(5936),G=n(8256);const W=e=>{let{files:s,setProgress:n,setIsSuccessUpload:i,resetDropzone:o,name:t,createChatRoom:a,setProcessing:l,subscription:r,isDemo:c,demoSubscription:d,setDemoSubscription:u,queryClient:m}=e;if(c&&d.pdfs<=0)return o(),f.m4.warning("The demo quota is exceeded, please wait 12 hours \ud83d\ude4f");if(!c){if(1!==(null===r||void 0===r?void 0:r.status))return o(),f.m4.warning("You need a valid subscription to continue.");if((null===r||void 0===r?void 0:r.pdfs)<=0)return o(),f.m4.warning("You have reached the maximum number of document uploads.")}(0,I.S_)("user/chat",s[0],{onUploadProgress:e=>{let s=e.loaded/e.total*100;n(s),s>=100&&l(!0)}}).then((e=>{var s;if(!e.data||null!==(s=e.data)&&void 0!==s&&s.errors){var n;f.m4.error(null===(n=e.data)||void 0===n?void 0:n.message),o()}else{const{chat_room:s}=e.data;a(s.uuid,s.title),i(!0),setTimeout((()=>{o()}),5e3),c&&u((e=>({...e,pdfs:e.pdfs-1}))),m.invalidateQueries("user.subscription")}})).catch((e=>{var s,n;422===e.response.status||400==e.response.status?f.m4.warning(null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message):f.m4.error(e.message);o()})).finally((()=>{l(!1)}))},Y=e=>{f.m4.error("Invalid document!")};function H(){const{isDemo:e}=(0,r.AX)(),[s,n]=(0,r.oV)("demo_sub",G.GX),u=e?s():null,{isExtendedLicense:m}=(0,r.UR)(),[x,g]=(0,l.useState)(!1),[p,v]=(0,l.useState)(!1),[b,A]=(0,r.KI)("resize",window.innerWidth,(()=>window.innerWidth)),{user:y}=(0,B.k)(),{isLoading:N,subscription:E}=(0,C.YI)(),O=(0,D.useQueryClient)(),M=(0,Q.i6)(),{uuid:I}=(0,Q.W4)(),[H,Z]=(0,l.useState)(I),{isLoading:K,isError:P,error:X,userChatRoomList:q}=(0,C.ao)(),[F,T]=(0,l.useState)(!1);(0,l.useEffect)((()=>{I!==H&&M("/playground/".concat(H))}),[H]);const L=(0,l.useCallback)((e=>{Z(e),M("/playground/".concat(e))}),[I]),V=(0,l.useCallback)(((e,s)=>{O.invalidateQueries("user.chat.list"),Z(e),M("/playground/".concat(e))}),[I]),_=(0,l.useCallback)(((e,s)=>{let n="";if(q)for(const i of q)if((null===i||void 0===i?void 0:i.uuid)!==e){n=null===i||void 0===i?void 0:i.uuid;break}(0,S.oX)(e).then((e=>{204===e.status?(f.m4.success("Deleted successfully."),O.invalidateQueries("user.chat.list").then((()=>{n&&Z(n)}))):f.m4.warning("Something went wrong!")})).catch((e=>{f.m4.error(e)})).finally((()=>{s()}))}),[I,q]);return(0,l.useEffect)((()=>{var e,s;I&&H||void 0===q||!Object.keys(q).length?void 0===q||Object.keys(q).length||(Z(""),M("/playground")):(M("/playground/".concat(null===(e=q[0])||void 0===e?void 0:e.uuid)),Z(null===(s=q[0])||void 0===s?void 0:s.uuid))}),[I,q]),(0,l.useEffect)((()=>{(new Date).getTime()-(null===u||void 0===u?void 0:u.created_at)>60*G._8*60*1e3&&n(G.GX)}),[]),P&&f.m4.error(X),!Object.keys(y).length||K||N?(0,j.jsx)(J.c,{}):(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("main",{className:"playground",children:[(0,j.jsx)(a.M3,{width:"290px",toggled:x,collapsed:p,breakPoint:"md",onBackdropClick:()=>g(!x),backgroundColor:"",className:"",children:(0,j.jsxs)("div",{className:"playground-sidebar",children:[!(null===q||void 0===q||!q.length)&&(E||u)&&(0,j.jsx)(t.c,{onUpload:W,onError:Y,name:"pdf-file",extraOnUploadProps:{createChatRoom:V,setProcessing:T,subscription:E,isDemo:e,demoSubscription:u,setDemoSubscription:n,queryClient:O},dropzoneOptions:{accept:(0,G.u6)(),maxSize:52428800},children:F?(0,j.jsx)("div",{className:"text-center",children:(0,j.jsxs)("b",{children:[(0,j.jsx)(w.c,{size:"sm"})," Processing..."]})}):p?(0,j.jsx)(o.u,{icon:i.qsE}):(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsxs)("b",{children:[(0,j.jsx)(o.u,{icon:i.qsE})," New Chat"]}),(0,j.jsxs)("p",{children:["Drag & Drop your Document",(0,j.jsx)("br",{}),(0,j.jsxs)("small",{children:["(",(0,G.Gy)(),")"]})]})]})}),(0,j.jsx)("div",{className:"chat-labels-list my-3",children:null===q||void 0===q?void 0:q.map(((e,s)=>(0,j.jsx)(h,{title:e.title,onClick:()=>L(e.uuid),onDelete:s=>_(e.uuid,s),active:e.uuid===H},s)))}),(0,j.jsxs)("div",{className:"sidebar-bottom-section",children:[e&&(0,j.jsxs)(j.Fragment,{children:[((null===E||void 0===E?void 0:E.questions)<=20||(null===E||void 0===E?void 0:E.pdfs)<=10)&&(0,j.jsxs)(z.cH,{to:"/pricing",className:"btn btn-warning btn-lg btn-block",children:[(0,j.jsx)(d.c,{icon:U.c,stroke:1.5,size:30})," Upgrade"]}),(0,j.jsxs)("div",{className:"quota",children:[(0,j.jsx)("small",{children:"- Quota limited for demo only."}),(0,j.jsx)("br",{}),(0,j.jsx)("small",{children:"- Quota reset every 12 hours."}),(0,j.jsx)("h3",{className:"h6",children:"Quota:"}),(0,j.jsxs)("span",{children:[(0,j.jsx)("b",{children:null===u||void 0===u?void 0:u.pdfs})," Documents left"]}),(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[(0,j.jsx)("b",{children:null===u||void 0===u?void 0:u.questions})," Document Questions left"]}),(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:["Max Document Size: ",(0,j.jsxs)("b",{children:[null===E||void 0===E?void 0:E.pdf_size,"MB/doc"]})]}),(0,j.jsx)("br",{})]})]}),E&&m&&!e&&(0,j.jsxs)(j.Fragment,{children:[((null===E||void 0===E?void 0:E.questions)<=20||(null===E||void 0===E?void 0:E.pdfs)<=10)&&(0,j.jsxs)(z.cH,{to:"/pricing",className:"btn btn-warning btn-lg btn-block",children:[(0,j.jsx)(d.c,{icon:U.c,stroke:1.5,size:30})," Upgrade"]}),(0,j.jsxs)("div",{className:"quota",children:[(0,j.jsx)("h3",{className:"h6",children:"Available Subscription Quota:"}),(0,j.jsxs)("span",{children:[(0,j.jsx)("b",{children:null===E||void 0===E?void 0:E.pdfs})," Documents left."]}),(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[(0,j.jsx)("b",{children:null===E||void 0===E?void 0:E.questions})," Document Questions left."]}),(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:["Max Document Size: ",(0,j.jsxs)("b",{children:[null===E||void 0===E?void 0:E.pdf_size,"MB/doc."]})]}),(0,j.jsx)("br",{})]})]}),y&&(0,j.jsxs)("div",{className:"profile",onClick:()=>M("/account/settings"),children:[(0,j.jsx)(c.c,{username:y.username,size:45}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:y.username}),(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:["(",y.email,")"]})]}),(0,j.jsx)("div",{className:"",children:(0,j.jsx)(o.u,{icon:i.wj6})})]})]})]})}),(0,j.jsxs)("section",{className:"playground-chat-section",children:[b<=768&&(0,j.jsx)("button",{type:"button",onClick:()=>g((e=>!e)),className:"btn btn-light toggle-sidebar-button text-primary",children:(0,j.jsx)(o.u,{icon:i.yoE})}),(0,j.jsxs)("section",{className:"d-flex flex-column",children:[m?E&&1==(null===E||void 0===E?void 0:E.status)||e?(null===E||void 0===E?void 0:E.questions)<=0?(0,j.jsxs)("div",{className:"d-flex flex-column justify-content-start p-5",children:["Your subscription has reached its maximum usage.",(0,j.jsx)(z.cH,{to:"/pricing",className:"btn btn-warning my-3",children:"Upgrade Now?"})]}):H&&(0,j.jsx)(k,{uuid:H},H):(0,j.jsxs)("div",{className:"d-flex flex-column justify-content-start p-5 mt-3",children:["You need to have a subscription in order to be able to use the Playground section.",(0,j.jsx)(z.cH,{to:"/pricing",className:"btn btn-warning my-3",children:"Get a subscription now?"})]}):H&&(0,j.jsx)(k,{uuid:H},H),!H&&(0,j.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:(0,j.jsx)("div",{className:"w-50",children:(E||u)&&(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("h3",{children:"Upload your Document to chat with."}),(0,j.jsx)(t.c,{onUpload:W,onError:Y,name:"pdf-file",extraOnUploadProps:{createChatRoom:V,setProcessing:T,subscription:E,isDemo:e,demoSubscription:u,setDemoSubscription:n,queryClient:O},dropzoneOptions:{accept:(0,G.u6)(),maxSize:52428800},children:F?(0,j.jsx)("div",{className:"text-center",children:(0,j.jsxs)("b",{children:[(0,j.jsx)(w.c,{size:"sm"})," Processing..."]})}):p?(0,j.jsx)(o.u,{icon:i.qsE}):(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsxs)("b",{children:[(0,j.jsx)(d.c,{icon:R.c,size:40}),(0,j.jsx)("br",{}),"Upload you Document",(0,j.jsx)("br",{}),"(",(0,G.Gy)(),")"]}),(0,j.jsx)("p",{children:"(Drag & Drop)"})]})})]})})})]})]})]})})}}}]);
//# sourceMappingURL=456.7c2572e7.chunk.js.map